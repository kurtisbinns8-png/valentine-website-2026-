<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Will You Be My Valentine? üíñ</title>

  <style>
    body{
      margin:0;
      height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      font-family: Arial, sans-serif;
      background: linear-gradient(135deg,#ffafbd,#ffc3a0);
      overflow:hidden;
    }
    .card{
      width:min(520px,92vw);
      background:#fff;
      border-radius:22px;
      padding:26px;
      text-align:center;
      box-shadow:0 18px 40px rgba(0,0,0,.18);
      position:relative;
      z-index:2;
    }
    h1{ margin:10px 0 14px; color:#ff4f7a; font-size:26px; }
    .sub{ color:#444; margin:0 0 18px; font-size:15px; }
    .photo{
      width:100%;
      height:260px;
      border-radius:18px;
      background:#f6f6f6;
      display:flex;
      align-items:center;
      justify-content:center;
      overflow:hidden;
      margin:0 0 18px;
    }
    .photo img{ width:100%; height:100%; object-fit:cover; }
    .row{
      display:flex;
      gap:12px;
      justify-content:center;
      flex-wrap:wrap;
      margin-top:8px;
      position:relative;
    }
    button{
      padding:12px 18px;
      font-size:16px;
      border:none;
      border-radius:12px;
      cursor:pointer;
      background:#ff6b81;
      color:#fff;
      transition:transform .08s ease, background .2s ease;
      user-select:none;
    }
    button:hover{ background:#ff4757; }
    button:active{ transform:scale(.98); }
    .ghost{
      background:#fff;
      color:#ff4757;
      border:2px solid #ff6b81;
    }
    .tiny{
      font-size:13px;
      padding:10px 14px;
      border-radius:12px;
    }
    .meterWrap{
      width:100%;
      background:#ffe3ea;
      border-radius:14px;
      height:16px;
      overflow:hidden;
      margin:12px 0 6px;
    }
    .meter{
      height:100%;
      width:0%;
      background:#ff6b81;
      transition:width .6s ease;
    }
    .meterText{ font-size:14px; color:#444; margin:6px 0 0; }
    .floating{
      position:absolute;
      inset:0;
      pointer-events:none;
      opacity:.55;
      z-index:1;
      overflow:hidden;
    }
    .heart{
      position:absolute;
      font-size:18px;
      animation: floatUp 12s linear infinite;
    }
    @keyframes floatUp{
      from{ transform:translateY(110vh); }
      to{ transform:translateY(-20vh); }
    }
  </style>
</head>

<body>
  <div class="floating" id="floating"></div>

  <div class="card">
    <div class="photo"><img id="photo" alt="photo"/></div>

    <h1 id="title"></h1>
    <p class="sub" id="sub"></p>

    <div id="meterArea" style="display:none;">
      <div class="meterWrap"><div class="meter" id="meter"></div></div>
      <p class="meterText" id="meterText"></p>
    </div>

    <div class="row" id="buttons"></div>

    <div class="row" style="margin-top:14px;">
      <button class="tiny ghost" id="musicBtn" style="display:none;">üéµ Play music</button>
    </div>
  </div>

<script>
/** ‚úÖ EDIT THESE **/
const valentineName = "Marcia";
const photos = [
  // Put your photo URLs here (see Step 3 below)
  "https://images.unsplash.com/photo-1529626455594-4ff0802cfb7e?auto=format&fit=crop&w=1200&q=60",
  "https://images.unsplash.com/photo-1518199266791-5375a83190b7?auto=format&fit=crop&w=1200&q=60",
  "https://images.unsplash.com/photo-1529333166437-7750a6dd5a70?auto=format&fit=crop&w=1200&q=60"
];

// Optional: add an MP3 URL (Cloudinary/Google Drive direct link/etc). Leave "" to disable.
const musicUrl = "";

/** Questions flow **/
const steps = [
  {
    title: `Hey ${valentineName} üíñ`,
    sub: "Quick question‚Ä¶ do you like me? üòå",
    buttons: [
      { text: "Yes üòá", action: () => nextStep() },
      { text: "No üôÑ", action: () => alert("Liar üò≠üíñ") }
    ]
  },
  {
    title: "How much do you love me? üòè",
    sub: "Be honest‚Ä¶",
    meter: true,
    buttons: [
      { text: "This much üíó", action: () => loveMeter() },
      { text: "Next üíò", action: () => nextStep(), ghost:true }
    ]
  },
  {
    title: "Final question‚Ä¶",
    sub: "Will you be my Valentine? üíò",
    buttons: [
      { text: "YESSS üíñ", action: () => celebrate() },
      { text: "No üòà", action: () => {}, runaway:true }
    ]
  }
];

/** Internal state **/
let stepIndex = 0;
let photoIndex = 0;
let meterValue = 0;
let audio;

/** UI refs **/
const titleEl = document.getElementById("title");
const subEl = document.getElementById("sub");
const buttonsEl = document.getElementById("buttons");
const photoEl = document.getElementById("photo");
const meterArea = document.getElementById("meterArea");
const meterEl = document.getElementById("meter");
const meterText = document.getElementById("meterText");
const musicBtn = document.getElementById("musicBtn");

/** Init **/
startHearts();
renderStep();
startPhotoLoop();
setupMusic();

/** Functions **/
function renderStep(){
  const s = steps[stepIndex];
  titleEl.textContent = s.title;
  subEl.textContent = s.sub;

  // Meter
  meterArea.style.display = s.meter ? "block" : "none";
  if(!s.meter){
    meterValue = 0;
    meterEl.style.width = "0%";
    meterText.textContent = "";
  }

  // Buttons
  buttonsEl.innerHTML = "";
  s.buttons.forEach((b) => {
    const btn = document.createElement("button");
    btn.textContent = b.text;
    if(b.ghost) btn.classList.add("ghost");

    if(b.runaway){
      btn.id = "noBtn";
      btn.addEventListener("mouseover", moveRunaway);
      btn.addEventListener("click", moveRunaway);
      // place relative to buttons area
      btn.style.position = "relative";
    } else {
      btn.addEventListener("click", b.action);
    }

    buttonsEl.appendChild(btn);
  });
}

function nextStep(){
  stepIndex = Math.min(stepIndex + 1, steps.length - 1);
  renderStep();
}

function loveMeter(){
  // Make it fun: jumps to random high values
  meterValue = Math.min(100, meterValue + Math.floor(20 + Math.random()*40));
  meterEl.style.width = meterValue + "%";

  if(meterValue >= 100){
    meterText.textContent = "OKAYYYY üò≠üíñ To infinity and beyond!";
  } else if(meterValue >= 70){
    meterText.textContent = "WOOOOW üò≥üíò";
  } else {
    meterText.textContent = "More‚Ä¶ more‚Ä¶ üëÄ";
  }
}

function moveRunaway(){
  const btn = document.getElementById("noBtn");
  // Use viewport so it can escape anywhere
  btn.style.position = "fixed";
  btn.style.left = (Math.random()*80 + 10) + "vw";
  btn.style.top  = (Math.random()*70 + 15) + "vh";
}

function celebrate(){
  titleEl.textContent = "YAYYYYY!!! üíñü•∞";
  subEl.textContent = "Now come claim your hug (and your gift üòå).";
  buttonsEl.innerHTML = "";
  meterArea.style.display = "none";
  burstHearts();
}

function startPhotoLoop(){
  // if no photos, hide area
  if(!photos || photos.length === 0){
    document.querySelector(".photo").style.display = "none";
    return;
  }
  photoEl.src = photos[0];
  setInterval(() => {
    photoIndex = (photoIndex + 1) % photos.length;
    photoEl.src = photos[photoIndex];
  }, 2600);
}

function startHearts(){
  const wrap = document.getElementById("floating");
  const emojis = ["üíñ","üíò","üíó","üíï","üíû","‚ù§Ô∏è"];
  for(let i=0;i<24;i++){
    const s = document.createElement("div");
    s.className = "heart";
    s.textContent = emojis[Math.floor(Math.random()*emojis.length)];
    s.style.left = (Math.random()*100) + "vw";
    s.style.animationDuration = (10 + Math.random()*10) + "s";
    s.style.animationDelay = (-Math.random()*10) + "s";
    s.style.fontSize = (14 + Math.random()*18) + "px";
    wrap.appendChild(s);
  }
}

function burstHearts(){
  for(let i=0;i<40;i++){
    const e = document.createElement("div");
    e.textContent = "üíñ";
    e.style.position = "fixed";
    e.style.left = (Math.random()*100) + "vw";
    e.style.top = (Math.random()*100) + "vh";
    e.style.fontSize = (18 + Math.random()*18) + "px";
    e.style.transition = "transform 1.1s ease, opacity 1.1s ease";
    document.body.appendChild(e);
    requestAnimationFrame(() => {
      e.style.transform = `translate(${(Math.random()*200-100)}px, ${(Math.random()*200-220)}px) scale(1.2)`;
      e.style.opacity = "0";
    });
    setTimeout(()=> e.remove(), 1200);
  }
}

function setupMusic(){
  if(!musicUrl) return;
  musicBtn.style.display = "inline-block";
  audio = new Audio(musicUrl);
  audio.loop = true;

  let playing = false;
  musicBtn.addEventListener("click", async () => {
    try{
      if(!playing){
        await audio.play();
        playing = true;
        musicBtn.textContent = "‚è∏Ô∏è Pause music";
      } else {
        audio.pause();
        playing = false;
        musicBtn.textContent = "üéµ Play music";
      }
    } catch(e){
      alert("Your browser blocked autoplay. Tap again to play üôÇ");
    }
  });
}
</script>

</body>
</html>
